@using MVC.Controls
@using MVC.Controls.Grid
@using Onion.MVCHelpers;
@model GLJ.Models.Cliente.PDCliente
@{
    ViewBag.Title = "Cadastro de Cliente da Loja";
}
@section JavaScript
{
    <script src="@Url.Content("~/Scripts/jquery.selectboxes/jquery.selectboxes.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.meio.mask.js")" type="text/javascript"></script>
}
<script type="text/javascript">
    $(document).ready(function () {
        $('#tabs').tabs();
        

        //Salvar dados
        $("#formObservacao").submit(function (e) {
            $('.error').hide();
            $('.success').hide();
            e.preventDefault();
            $.post($(this).attr("action"), $(this).serialize(), function (data) {
                if (data.Success) {
                    $("#DadosCliente").jqGrid().trigger("reloadGrid");
                    $('.success').html(data.Mensage);
                    $('.success').show();
                    

                }
                else {
                    alert('erro Cadsatro Cliente');
                    $('.error').html(data.Mensage);
                    $('.error').show();
                }
            });
        });


    });
</script>
<div id="tabs">
    <ul>
        <li><a href="#tabCliente">Dados Cadastrais</a></li>
        <li><a href="#tabDadosCliente">Endereços</a></li>
        <li><a href="#tabTelefone">Telefones</a></li>
        <li><a href="#tabObservacao">Observações</a></li>
    </ul>
    <div id="tabCliente">@Html.Partial("_Cliente", Model)</div>
    <div id="tabDadosCliente">@Html.Partial("_DadosCliente")</div>
    <div id="tabTelefone">@Html.Partial("_TelefoneCliente")</div>
    <div id="tabObservacao">
        <div class="divTituloPagina">
            <h3>
                Observação do cliente</h3>
        </div>
        @using (Ajax.BeginForm("AdicionarObservacao", "Cliente", new AjaxOptions()
        {
            HttpMethod = "Post",
            OnSuccess = "success"
        }, new { enctype = "multipart/form-data", @class = "uniForm", id = "formObservacao" }
        ))
        {
            <fieldset class="inlineLabels">
                <div class="ctrlHolder">
                    @Html.HiddenFor(m => m.Cliente.Codigo);
                    @Html.LabelFor(m => m.Cliente.Observacao)
                    @Html.TextAreaFor(m => m.Cliente.Observacao, new { @class = "textInput", placeholder = Html.PlaceHolder(p => p.Cliente.Observacao) })
                    <img src='@Url.Content("~/Content/img/info_tooltip.png")' title="Informe uma Observação." alt="" />
                    <p class="formHint">
                        @Html.ValidationMessageFor(m => m.Cliente.Observacao)</p>
                </div>
                <div class="buttonHolder">
                    <input type="submit" class="primaryAction" value="Salvar Observação" title="Adicionar Observação." />
                </div>
            </fieldset>
        }
    </div>
</div>
